import{usePageData as E,useSiteData as $,defineClientConfig as k}from"vuepress/client";import{useLocaleConfig as w,endsWith as d,isPlainObject as G,isString as O,ensureLeadingSlash as P,ensureEndingSlash as R,startsWith as C,keys as T,isNumber as m,VPLink as u,hasGlobalComponent as D}from"vuepress-shared/client";import{defineComponent as V,shallowRef as j,computed as B,h as e}from"vue";import{useRouter as H}from"vue-router";import"./styles/auto-catalog.scss";import{useAutoCatalogGetter as N,injectAutoCatalogGetter as U}from"./index.js";var W=V({name:"AutoCatalog",props:{base:{type:String,default:""},level:{type:Number,default:3},index:Boolean,hideHeading:Boolean},setup(a){__VUEPRESS_DEV__&&a.indexType&&console.warn("[AutoCatalog]: `indexType` is deprecated, please use `index` instead");const A=N(),f=w(AUTO_CATALOG_LOCALES),S=E(),y=H(),_=$(),L=j(y.getRoutes().filter(({path:t})=>d(t,".html")&&!d(t,"/index.html")||d(t,"/")).map(({meta:t,path:n})=>{const r=A(t);if(!r)return null;const s=n.split("/").length;return{level:d(n,"/")?s-2:s-1,base:n.replace(/\/[^/]+\/?$/,"/"),path:n,...r}}).filter(t=>G(t)&&O(t.title))),g=B(()=>{const t=a.base?P(R(a.base)):S.value.path.replace(/\/[^/]+$/,"/"),n=t.split("/").length-2,r=[];return L.value.filter(({level:s,path:o})=>{if(!C(o,t)||o===t)return!1;if(t==="/"){const i=T(_.value.locales).filter(l=>l!=="/");if(o==="/404.html"||i.some(l=>C(o,l)))return!1}return s-n<=a.level}).sort(({title:s,level:o,order:i},{title:l,level:c,order:p})=>o-c||(m(i)?m(p)?i>0?p>0?i-p:-1:p<0?i-p:1:i:m(p)?p:s.localeCompare(l))).forEach(s=>{const{base:o,level:i}=s;switch(i-n){case 1:{r.push(s);break}case 2:{const l=r.find(c=>c.path===o);l&&(l.children??=[]).push(s);break}default:{const l=r.find(c=>c.path===o.replace(/\/[^/]+\/$/,"/"));if(l){const c=l.children?.find(p=>p.path===o);c&&(c.children??=[]).push(s)}}}}),r});return()=>{const t=g.value.some(n=>n.children);return e("div",{class:["vp-catalog-wrapper",{index:a.index}]},[a.hideHeading?null:e("h2",{class:"vp-catalog-main-title"},f.value.title),g.value.length?e(a.index?"ol":"ul",{class:["vp-catalogs",{deep:t}]},g.value.map(({children:n=[],title:r,path:s,content:o})=>{const i=e(u,{class:"vp-catalog-title",to:s},()=>o?e(o):r);return e("li",{class:"vp-catalog"},t?[e("h3",{id:r,class:["vp-catalog-child-title",{"has-children":n.length}]},[e("a",{href:`#${r}`,class:"header-anchor","aria-hidden":!0},"#"),i]),n.length?e(a.index?"ol":"ul",{class:"vp-child-catalogs"},n.map(({children:l=[],content:c,path:p,title:v})=>e("li",{class:"vp-child-catalog"},[e("div",{class:["vp-catalog-sub-title",{"has-children":l.length}]},[e("a",{href:`#${v}`,class:"header-anchor"},"#"),e(u,{class:"vp-catalog-title",to:p},()=>c?e(c):v)]),l.length?e(a.index?"ol":"div",{class:a.index?"vp-sub-catalogs":"vp-sub-catalogs-wrapper"},l.map(({content:h,path:b,title:x})=>a.index?e("li",{class:"vp-sub-catalog"},e(u,{to:b},()=>h?e(h):x)):e(u,{class:"vp-sub-catalog-link",to:b},()=>h?e(h):x))):null]))):null]:e("div",{class:"vp-catalog-child-title"},i))})):e("p",{class:"vp-empty-catalog"},f.value.empty)])}}}),q=k({enhance:({app:a})=>{U(a),D("AutoCatalog",a)||a.component("AutoCatalog",W)}});export{q as default};
//# sourceMappingURL=config.js.map
