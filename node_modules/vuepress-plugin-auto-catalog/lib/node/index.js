import{useSassPalettePlugin as f}from"vuepress-plugin-sass-palette";import{Logger as h,ensureEndingSlash as C,getTitleFromFilename as K,createConverter as v,getLocales as L,addViteSsrNoExternal as k}from"vuepress-shared/node";import{createPage as x}from"vuepress/core";import{getDirname as $,path as w,colors as A}from"vuepress/utils";const E=$(import.meta.url),m="vuepress-plugin-auto-catalog",u=new h(m),I=C(w.resolve(E,"../client")),O=async(t,{component:o="AutoCatalog",exclude:l=[],frontmatter:r=()=>({}),level:i=3,index:n=!1})=>{const{env:{isDebug:g},pages:d}=t,p=new Set,y=`<${o}${[1,2].includes(i)?` :level="${i}"`:""}${n?" index":""}/>
`;d.forEach(({path:e,pathLocale:s})=>{let a=e;if(e!=="/404.html")for(;a!==s;)a=a.replace(/\/(?:[^/]+\/?)$/,"/"),!p.has(a)&&l.every(c=>!a.match(c))&&d.every(({path:c})=>c!==a)&&(g&&u.info(`Generating catalog ${a}`),p.add(a))}),await Promise.all(Array.from(p).map(e=>decodeURI(e)).map(e=>{const[,s=""]=/\/([^/]+)\/?$/.exec(e)||[],a=K(s);return x(t,{frontmatter:{title:a,...r(e)||{}},content:y,path:e})})).then(e=>{t.pages.push(...e)})},G=t=>{const{deprecatedLogger:o,droppedLogger:l}=v("auto-catalog");o({options:t,old:"getTitle",new:"titleGetter"}),o({options:t,old:"getIcon",new:"iconGetter"}),o({options:t,old:"getOrder",new:"orderGetter"}),o({options:t,old:"getIndex",new:"shouldIndex"}),l({options:t,old:"iconComponent",msg:`please use ${A.magenta("defineAutoCatalogIconComponent")} in client config file.`})},P={"/en/":{title:"Catalog",empty:"No catalog"},"/zh/":{title:"目录",empty:"暂无目录"},"/zh-tw/":{title:"目錄",empty:"暫無目錄"},"/de/":{title:"Katalog",empty:"Kein Katalog"},"/de-at/":{title:"Katalog",empty:"Kein Katalog"},"/vi/":{title:"Danh mục",empty:"Không có danh mục"},"/uk/":{title:"Каталог",empty:"Немає каталогу"},"/ru/":{title:"Каталог",empty:"Нет каталога"},"/br/":{title:"Catálogo",empty:"Sem catálogo"},"/pl/":{title:"Katalog",empty:"Brak katalogu"},"/sk/":{title:"Katalóg",empty:"Žiadny katalóg"},"/fr/":{title:"Catalogue",empty:"Pas de catalogue"},"/es/":{title:"Catálogo",empty:"Sin catálogo"},"/ja/":{title:"カタログ",empty:"カタログなし"},"/tr/":{title:"Katalog",empty:"Katalog yok"},"/ko/":{title:"목차",empty:"목차 없음"},"/fi/":{title:"Luettelo",empty:"Ei luetteloa"},"/hu/":{title:"Katalógus",empty:"Nincs katalógus"},"/id/":{title:"Katalog",empty:"Tidak ada katalog"},"/nl/":{title:"Catalogus",empty:"Geen catalogus"}},S=(t={},o=!0)=>l=>{o&&G(t),l.env.isDebug&&u.info("Options:",t),f(l,{id:"hope"});const{component:r,locales:i}=t;return{name:m,define:()=>({AUTO_CATALOG_LOCALES:L({app:l,name:m,default:P,config:i})}),onInitialized:n=>O(n,t),extendsBundlerOptions:(n,g)=>{k(n,g,"vuepress-shared")},...r?{}:{clientConfigFile:`${I}config.js`}}};export{S as autoCatalogPlugin};
//# sourceMappingURL=index.js.map
