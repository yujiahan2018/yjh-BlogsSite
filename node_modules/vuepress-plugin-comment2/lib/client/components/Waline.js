import{pageviewCount as c}from"@waline/client/pageview";import{defineComponent as f,computed as r,onMounted as v,watch as g,nextTick as L,h as a,defineAsyncComponent as C}from"vue";import{usePageFrontmatter as h,usePageLang as w}from"vuepress/client";import{useLocaleConfig as W,LoadingIcon as A}from"vuepress-shared/client";import"@waline/client/waline.css";import"../styles/waline.scss";import{c as N}from"../index-wG_My4pN.js";const y=WALINE_LOCALES;WALINE_META&&import("@waline/client/waline-meta.css");var E=f({name:"WalineComment",props:{identifier:{type:String,required:!0}},setup(t){const e=N(),m=h(),p=w(),l=W(y);let i;const n=!!e.serverURL,s=r(()=>{if(!n)return!1;const u=e.pageview!==!1,o=m.value.pageview;return!!o||u!==!1&&o!==!1}),d=r(()=>({lang:p.value==="zh-CN"?"zh-CN":"en",locale:l.value,dark:"html.dark",...e,path:t.identifier}));return v(()=>{g(()=>t.identifier,()=>{i?.(),s.value&&L().then(()=>{setTimeout(()=>{i=c({serverURL:e.serverURL,path:t.identifier})},e.delay||800)})},{immediate:!0})}),()=>n?a("div",{id:"comment",class:"waline-wrapper"},a(C({loader:async()=>(await import("@waline/client/component")).Waline,loadingComponent:A}),d.value)):null}});export{E as default};
//# sourceMappingURL=Waline.js.map
