{"version":3,"file":"index.js","sources":["../../src/node/locales.ts","../../src/node/utils.ts","../../src/node/compact.ts","../../src/node/plugins.ts"],"sourcesContent":["import type { CopyrightLocaleConfig } from \"../shared/index.js\";\n\n/** Multi language config for copyright */\nexport const copyrightLocales: CopyrightLocaleConfig = {\n  \"/en/\": {\n    author: \"Copyright by :author\",\n    license: \"License under :license\",\n    link: \":link\",\n  },\n\n  \"/zh/\": {\n    author: \"著作权归:author所有\",\n    license: \"基于:license协议\",\n    link: \"原文链接：:link\",\n  },\n\n  \"/zh-tw/\": {\n    author: \"著作權歸:author所有\",\n    license: \"基於:license協議\",\n    link: \"原文鏈接：:link\",\n  },\n\n  \"/ru/\": {\n    author: \"Авторские права :author\",\n    license: \"Лицензия :license\",\n    link: \":link\",\n  },\n\n  \"/pl/\": {\n    author: \"Prawa autorskie :author\",\n    license: \"Licencja :license\",\n    link: \":link\",\n  },\n\n  \"/sk/\": {\n    author: \"Autorské práva :author\",\n    license: \"Licencia :license\",\n    link: \":link\",\n  },\n\n  \"/fr/\": {\n    author: \"Copyright par :author\",\n    license: \"Sous licence :license\",\n    link: \":link\",\n  },\n\n  \"/es/\": {\n    author: \"Derechos de autor :author\",\n    license: \"Licencia :license\",\n    link: \":link\",\n  },\n\n  \"/ja/\": {\n    author: \"著作権者 :author\",\n    license: \":licenseプロトコルに基づく\",\n    link: \":link\",\n  },\n\n  \"/tr/\": {\n    author: \"Telif hakkı sahibi :author\",\n    license: \"Lisans :license\",\n    link: \":link\",\n  },\n\n  \"/ko/\": {\n    author: \"저작권자 :author\",\n    license: \":license 프로토콜에 따라\",\n    link: \":link\",\n  },\n\n  \"/fi/\": {\n    author: \"Tekijänoikeus :author\",\n    license: \"Lisenssi :license\",\n    link: \":link\",\n  },\n\n  \"/de/\": {\n    author: \"Copyright by :author\",\n    license: \"Lizenziert unter :license\",\n    link: \":link\",\n  },\n\n  \"/de-AT/\": {\n    author: \"Copyright by :author\",\n    license: \"Lizenziert unter :license\",\n    link: \":link\",\n  },\n\n  \"/hu/\": {\n    author: \"Szerzői jog :author\",\n    license: \"Licensz: :license\",\n    link: \":link\",\n  },\n\n  \"/id/\": {\n    author: \"Hak cipta oleh :author\",\n    license: \"Dibawah Lisensi :license\",\n    link: \":link\",\n  },\n\n  \"/nl/\": {\n    author: \"Auteursrecht van :author\",\n    license: \"Licentie onder :license\",\n    link: \":link\",\n  },\n};\n","import { getDirname, path } from \"vuepress/utils\";\nimport { Logger, ensureEndingSlash } from \"vuepress-shared/node\";\n\nconst __dirname = getDirname(import.meta.url);\n\nexport const CLIENT_FOLDER = ensureEndingSlash(\n  path.resolve(__dirname, \"../client\"),\n);\n\nexport const PLUGIN_NAME = \"vuepress-plugin-copyright2\";\n\nexport const logger = new Logger(PLUGIN_NAME);\n","import { colors } from \"vuepress/utils\";\nimport { createConverter, isFunction } from \"vuepress-shared/node\";\n\nimport type { CopyrightOptions } from \"./options.js\";\nimport { logger } from \"./utils.js\";\n\n/** @deprecated */\nexport const convertOptions = (\n  options: CopyrightOptions & Record<string, unknown>,\n): void => {\n  const { deprecatedLogger } = createConverter(\"copy-code2\");\n\n  deprecatedLogger({\n    options,\n    old: \"triggerWords\",\n    new: \"triggerLength\",\n  });\n  deprecatedLogger({\n    options,\n    old: \"hostname\",\n    new: \"canonical\",\n  });\n\n  if (isFunction(options.author)) {\n    logger.warn(\n      `${colors.cyan(\n        \"author\",\n      )} no longer support function, please use ${colors.cyan(\"authorGetter\")}`,\n    );\n\n    // @ts-expect-error\n    options.authorGetter = options.author;\n  }\n\n  if (isFunction(options.license)) {\n    logger.warn(\n      `${colors.cyan(\n        \"license\",\n      )} no longer support function, please use ${colors.cyan(\"licenseGetter\")}`,\n    );\n\n    // @ts-expect-error\n    options.licenseGetter = options.license;\n  }\n};\n","import type { Page, PluginFunction } from \"vuepress/core\";\nimport { colors } from \"vuepress/utils\";\nimport { addViteSsrNoExternal, getLocales } from \"vuepress-shared/node\";\n\nimport { convertOptions } from \"./compact.js\";\nimport { copyrightLocales } from \"./locales.js\";\nimport type { CopyrightOptions } from \"./options.js\";\nimport { CLIENT_FOLDER, PLUGIN_NAME, logger } from \"./utils.js\";\nimport type {\n  CopyrightInfoData,\n  CopyrightPluginPageData,\n} from \"../shared/index.js\";\n\nexport const copyrightPlugin =\n  (options: CopyrightOptions, legacy = true): PluginFunction =>\n  (app) => {\n    // TODO: Remove this in v2 stable\n    if (legacy)\n      convertOptions(options as CopyrightOptions & Record<string, unknown>);\n\n    if (app.env.isDebug) logger.info(\"Options:\", options);\n\n    const {\n      canonical,\n      author = \"\",\n      authorGetter,\n      license = \"\",\n      licenseGetter,\n      copyrightGetter,\n      disableCopy = false,\n      disableSelection = false,\n      global = false,\n      triggerLength = 100,\n      maxLength = 0,\n    } = options;\n\n    const locales = getLocales({\n      app,\n      name: PLUGIN_NAME,\n      default: copyrightLocales,\n      config: options.locales,\n    });\n\n    return {\n      name: PLUGIN_NAME,\n\n      define: (): Record<string, unknown> => ({\n        COPYRIGHT_CANONICAL: canonical || \"\",\n        COPYRIGHT_DEFAULT_AUTHOR: author || \"\",\n        COPYRIGHT_DEFAULT_LICENSE: license || \"\",\n        COPYRIGHT_GLOBAL: global,\n        COPYRIGHT_DISABLE_COPY: disableCopy,\n        COPYRIGHT_DISABLE_SELECTION: disableSelection,\n        COPYRIGHT_LOCALES: locales,\n        COPYRIGHT_MAX_LENGTH: maxLength,\n        COPYRIGHT_TRIGGER_LENGTH: triggerLength,\n      }),\n\n      extendsPage: (page: Page<Partial<CopyrightPluginPageData>>): void => {\n        const authorText = authorGetter?.(page) ?? author;\n        const licenseText = licenseGetter?.(page) ?? license;\n        const copyright = copyrightGetter?.(page);\n\n        // TODO: Remove this in v2 stable\n        if (page.frontmatter[\"triggerWords\"]) {\n          logger.warn(\n            `The ${colors.cyan(\n              \"triggerWords\",\n            )} option is deprecated, use ${colors.cyan(\n              \"triggerLength\",\n            )} instead${\n              page.filePathRelative\n                ? `, found in ${page.filePathRelative}`\n                : \".\"\n            }`,\n          );\n\n          page.frontmatter[\"triggerLength\"] = page.frontmatter[\"triggerWords\"];\n        }\n\n        if (copyright) {\n          page.data.copyright = copyright;\n        } else {\n          const hasDifferentAuthor = authorText && authorText !== author;\n          const hasDifferentLicense = licenseText && licenseText !== license;\n\n          if (hasDifferentAuthor || hasDifferentLicense) {\n            const copyrightInfo: CopyrightInfoData = {};\n\n            if (hasDifferentAuthor) copyrightInfo.author = authorText;\n            if (hasDifferentLicense) copyrightInfo.license = licenseText;\n            page.data.copyright = copyrightInfo;\n          }\n        }\n      },\n\n      extendsBundlerOptions: (bundlerOptions: unknown, app): void => {\n        addViteSsrNoExternal(bundlerOptions, app, \"vuepress-shared\");\n      },\n\n      clientConfigFile: `${CLIENT_FOLDER}config.js`,\n    };\n  };\n"],"names":["copyrightLocales","__dirname","getDirname","CLIENT_FOLDER","ensureEndingSlash","path","PLUGIN_NAME","logger","Logger","convertOptions","options","deprecatedLogger","createConverter","isFunction","colors","copyrightPlugin","legacy","app","canonical","author","authorGetter","license","licenseGetter","copyrightGetter","disableCopy","disableSelection","global","triggerLength","maxLength","locales","getLocales","page","authorText","licenseText","copyright","hasDifferentAuthor","hasDifferentLicense","copyrightInfo","bundlerOptions","addViteSsrNoExternal"],"mappings":"sNAGO,MAAMA,EAA0C,CACrD,OAAQ,CACN,OAAQ,uBACR,QAAS,yBACT,KAAM,OACR,EAEA,OAAQ,CACN,OAAQ,gBACR,QAAS,eACT,KAAM,YACR,EAEA,UAAW,CACT,OAAQ,gBACR,QAAS,eACT,KAAM,YACR,EAEA,OAAQ,CACN,OAAQ,0BACR,QAAS,oBACT,KAAM,OACR,EAEA,OAAQ,CACN,OAAQ,0BACR,QAAS,oBACT,KAAM,OACR,EAEA,OAAQ,CACN,OAAQ,yBACR,QAAS,oBACT,KAAM,OACR,EAEA,OAAQ,CACN,OAAQ,wBACR,QAAS,wBACT,KAAM,OACR,EAEA,OAAQ,CACN,OAAQ,4BACR,QAAS,oBACT,KAAM,OACR,EAEA,OAAQ,CACN,OAAQ,eACR,QAAS,oBACT,KAAM,OACR,EAEA,OAAQ,CACN,OAAQ,6BACR,QAAS,kBACT,KAAM,OACR,EAEA,OAAQ,CACN,OAAQ,eACR,QAAS,oBACT,KAAM,OACR,EAEA,OAAQ,CACN,OAAQ,wBACR,QAAS,oBACT,KAAM,OACR,EAEA,OAAQ,CACN,OAAQ,uBACR,QAAS,4BACT,KAAM,OACR,EAEA,UAAW,CACT,OAAQ,uBACR,QAAS,4BACT,KAAM,OACR,EAEA,OAAQ,CACN,OAAQ,sBACR,QAAS,oBACT,KAAM,OACR,EAEA,OAAQ,CACN,OAAQ,yBACR,QAAS,2BACT,KAAM,OACR,EAEA,OAAQ,CACN,OAAQ,2BACR,QAAS,0BACT,KAAM,OACR,CACF,ECtGMC,EAAYC,EAAW,YAAY,GAAG,EAE/BC,EAAgBC,EAC3BC,EAAK,QAAQJ,EAAW,WAAW,CACrC,EAEaK,EAAc,6BAEdC,EAAS,IAAIC,EAAOF,CAAW,ECJ/BG,EACXC,GACS,CACT,KAAM,CAAE,iBAAAC,CAAiB,EAAIC,EAAgB,YAAY,EAEzDD,EAAiB,CACf,QAAAD,EACA,IAAK,eACL,IAAK,eACP,CAAC,EACDC,EAAiB,CACf,QAAAD,EACA,IAAK,WACL,IAAK,WACP,CAAC,EAEGG,EAAWH,EAAQ,MAAM,IAC3BH,EAAO,KACL,GAAGO,EAAO,KACR,QACF,CAAC,2CAA2CA,EAAO,KAAK,cAAc,CAAC,EACzE,EAGAJ,EAAQ,aAAeA,EAAQ,QAG7BG,EAAWH,EAAQ,OAAO,IAC5BH,EAAO,KACL,GAAGO,EAAO,KACR,SACF,CAAC,2CAA2CA,EAAO,KAAK,eAAe,CAAC,EAC1E,EAGAJ,EAAQ,cAAgBA,EAAQ,QAEpC,EC/BaK,EACX,CAACL,EAA2BM,EAAS,KACpCC,GAAQ,CAEHD,GACFP,EAAeC,CAAqD,EAElEO,EAAI,IAAI,SAASV,EAAO,KAAK,WAAYG,CAAO,EAEpD,KAAM,CACJ,UAAAQ,EACA,OAAAC,EAAS,GACT,aAAAC,EACA,QAAAC,EAAU,GACV,cAAAC,EACA,gBAAAC,EACA,YAAAC,EAAc,GACd,iBAAAC,EAAmB,GACnB,OAAAC,EAAS,GACT,cAAAC,EAAgB,IAChB,UAAAC,EAAY,CACd,EAAIlB,EAEEmB,EAAUC,EAAW,CACzB,IAAAb,EACA,KAAMX,EACN,QAASN,EACT,OAAQU,EAAQ,OAClB,CAAC,EAED,MAAO,CACL,KAAMJ,EAEN,OAAQ,KAAgC,CACtC,oBAAqBY,GAAa,GAClC,yBAA0BC,GAAU,GACpC,0BAA2BE,GAAW,GACtC,iBAAkBK,EAClB,uBAAwBF,EACxB,4BAA6BC,EAC7B,kBAAmBI,EACnB,qBAAsBD,EACtB,yBAA0BD,CAC5B,GAEA,YAAcI,GAAuD,CACnE,MAAMC,EAAaZ,IAAeW,CAAI,GAAKZ,EACrCc,EAAcX,IAAgBS,CAAI,GAAKV,EACvCa,EAAYX,IAAkBQ,CAAI,EAmBxC,GAhBIA,EAAK,YAAY,eACnBxB,EAAO,KACL,OAAOO,EAAO,KACZ,cACF,CAAC,8BAA8BA,EAAO,KACpC,eACF,CAAC,WACCiB,EAAK,iBACD,cAAcA,EAAK,gBAAgB,GACnC,GACN,EACF,EAEAA,EAAK,YAAY,cAAmBA,EAAK,YAAY,cAGnDG,EACFH,EAAK,KAAK,UAAYG,MACjB,CACL,MAAMC,EAAqBH,GAAcA,IAAeb,EAClDiB,EAAsBH,GAAeA,IAAgBZ,EAE3D,GAAIc,GAAsBC,EAAqB,CAC7C,MAAMC,EAAmC,GAErCF,IAAoBE,EAAc,OAASL,GAC3CI,IAAqBC,EAAc,QAAUJ,GACjDF,EAAK,KAAK,UAAYM,CACxB,CACF,CACF,EAEA,sBAAuB,CAACC,EAAyBrB,IAAc,CAC7DsB,EAAqBD,EAAgBrB,EAAK,iBAAiB,CAC7D,EAEA,iBAAkB,GAAGd,CAAa,WACpC,CACF"}