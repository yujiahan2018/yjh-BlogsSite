import{useEventListener as v,useDebounceFn as g}from"@vueuse/core";import{defineComponent as k,ref as y,shallowRef as m,onMounted as M,onUnmounted as h,h as o}from"vue";import{atou as w,LoadingIcon as b}from"vuepress-shared/client";import"../styles/markmap.scss";var D=k({name:"MarkMap",props:{id:{type:String,required:!0},content:{type:String,required:!0}},setup(a){const n=y(!0),i=m(),s=m();let e=null;return v("resize",g(()=>{e?.fit()},100)),M(()=>{Promise.all([import("markmap-lib"),import("markmap-toolbar"),import("markmap-view"),new Promise(r=>setTimeout(r,MARKDOWN_ENHANCE_DELAY))]).then(async([{Transformer:r},{Toolbar:p},{Markmap:l,deriveOptions:u}])=>{const d=new r,{frontmatter:f,root:c}=d.transform(w(a.content));e=l.create(s.value,u(f?.markmap??{}));const{el:t}=p.create(e);e.setData(c),await e.fit(),t.style.position="absolute",t.style.bottom="0.5rem",t.style.right="0.5rem",i.value.append(t),n.value=!1})}),h(()=>{e?.destroy()}),()=>o("div",{class:"markmap-wrapper",ref:i},[o("svg",{ref:s,class:"markmap-svg",id:a.id}),n.value?o(b,{class:"markmap-loading",height:360}):null])}});export{D as default};
//# sourceMappingURL=MarkMap.js.map
